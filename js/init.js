// Generated by CoffeeScript 1.6.3
(function() {
  var $;

  $ = jQuery;

  $(document).ready(function() {
    if ($('#slides').length) {
      $('#slides').slidesjs({
        width: 940,
        height: 528,
        play: {
          active: false,
          effect: "slide",
          interval: 4000,
          auto: true,
          swap: true,
          pauseOnHover: false,
          restartDelay: 2500
        },
        navigation: true
      });
    }
    $(".nav ul:eq(0)").find("li").on('mouseover', function() {
      var idx;
      window.sliderWidth = $("#slides").outerWidth();
      $(this).addClass('hover');
      if ($('.main').length) {
        if ($(window).width() < 680) {
          window.sliderWidth = $('.mision').outerWidth() + 10;
        }
      }
      idx = $(this).index();
      if (idx !== 0) {
        $(".nav").find('.sub-menu').width(window.sliderWidth).eq(idx - 1).show();
        return $('.side-nav').addClass('brd-red');
      }
    }).on('mouseleave', function() {
      $('.sub-menu').hide();
      $('.brd-red').removeClass('brd-red');
      return $("li.hover").removeClass('hover');
    });
    $('.sub-menu').on('mouseover', function() {
      var idx;
      idx = $(this).index();
      $(".nav").find('ul').first().find('li').eq(idx).addClass('hover');
      $(this).show();
      return $('.side-nav').addClass('brd-red');
    }).on('mouseleave', function() {
      $(this).hide();
      $('.brd-red').removeClass('brd-red');
      return $("li.hover").removeClass('hover');
    });
    $(".nav").find('ul').first().find('li').first().on('click', function() {
      if ($(window).width() < 600) {
        return $(".side-nav").toggleClass('show');
      }
    });
    if ($('#mycarousel').length) {
      if ($(window).width() < 1000) {
        $('#mycarousel').jcarousel({
          scroll: 1,
          visible: 3,
          wrap: 'circular'
        });
      } else {
        $('#mycarousel').jcarousel({
          scroll: 1,
          visible: 5,
          wrap: 'circular'
        });
      }
    }
    $(".news-section").on('mouseleave', function() {
      return $(this).removeClass('active');
    });
    $(".news-link-icon").on('mouseover', function() {
      return $(this).parents(".news-section").addClass('active');
    });
    $(".photo-galery").find("a").on('click', function(ev) {
      var srcImg;
      ev.preventDefault();
      if ($(this).hasClass('next-pic')) {
        if ($(".photo-galery").find(".active").index() === $(this).parents(".photo-galery").find("a").length - 2) {
          return false;
        } else {
          return $(".photo-galery").find(".active").removeClass('active').next().click();
        }
      } else if (!($(this).hasClass('active'))) {
        $(".photo-galery").find(".active").removeClass('active');
        $(this).addClass('active');
        srcImg = $(this).attr('href');
        return $(".big-pic").find('img').fadeOut(function() {
          return $(".big-pic").find('img').attr('src', srcImg);
        }).fadeIn();
      }
    });
    $(".content-galery-small .photo-galery").find("a").on('click', function() {
      var currentMargin, currentMarginMath, min;
      if ($(".photo-galery").find(".active").next().index() % 3 === 0) {
        currentMargin = $(".content-galery-small .photo-galery").find('li > div').css('marginTop');
        currentMarginMath = parseInt(currentMargin.substring(0, currentMargin.length - 2));
        min = currentMarginMath - 45;
        return $(".content-galery-small .photo-galery").find('li > div').css({
          marginTop: min + 'px'
        });
      }
    });
  });

  jQuery(window).load(function() {
    var liHeight, w,
      _this = this;
    w = ($('#slides').find('.slidesjs-pagination-item').length * 15) / 2;
    $(".slidesjs-pagination").css({
      'marginLeft': -w + 'px'
    });
    $('.w940').each(function() {
      var h;
      h = $(this).outerHeight();
      return $(this).find(".h-fix").css({
        'height': h + 'px'
      });
    });
    if ($(".section3 .news-list").length) {
      liHeight = 0;
      $(".section3 .news-list").find('li').each(function() {
        var curHeight;
        curHeight = $(this).outerHeight();
        if (curHeight >= liHeight) {
          return liHeight = curHeight;
        }
      });
      $(".news-list").find('li').css({
        'height': liHeight + 'px'
      });
    }
    $('.side-nav').height($("#slides").outerHeight());
    $(".photo-galery").find("a").first().click();
    $(window).resize(function() {
      $('.side-nav').height($("#slides").outerHeight());
      liHeight = 0;
      $(".section3 .news-list").find('li').each(function() {
        var curHeight;
        curHeight = $(this).outerHeight();
        if (curHeight >= liHeight) {
          return liHeight = curHeight;
        }
      });
      $(".news-list").find('li').css({
        'height': liHeight + 'px'
      });
      if ($("#sv-wrapper").outerHeight() > $('.bg2').height()) {
        $('.bg2').height($("#sv-wrapper").outerHeight() - 250);
      }
      if ($('#mycarousel').length) {
        if ($(window).width() < 1000) {
          return $('#mycarousel').jcarousel({
            scroll: 1,
            visible: 3,
            wrap: 'circular'
          });
        }
      }
    });
    if ($("a.galery-group").length) {
      $("a.galery-group").fancybox({
        openEffect: 'elastic',
        openSpeed: 150,
        closeEffect: 'elastic',
        closeSpeed: 150,
        closeClick: true,
        helpers: {
          overlay: null
        }
      });
    }
    if ($("#sv-wrapper").outerHeight() > $('.bg2').height()) {
      $('.bg2').height($("#sv-wrapper").outerHeight() - 250);
    }
  });

}).call(this);
